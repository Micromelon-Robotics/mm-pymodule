<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>micromelon.motors API documentation</title>
<meta name="description" content="Collection of functions to control the movement of the robot" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<style>.homelink img{max-width:20%;max-height:5em;margin:auto;margin-bottom:.3em}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>micromelon.motors</code></h1>
</header>
<section id="section-intro">
<p>Collection of functions to control the movement of the robot</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Collection of functions to control the movement of the robot
&#34;&#34;&#34;
from ._motors import *

__all__ = [
    &#34;write&#34;,
    &#34;moveDistance&#34;,
    &#34;turn&#34;,
    &#34;turnDegrees&#34;,
    &#34;setDegreesOffset&#34;,
]</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="micromelon.motors.moveDistance"><code class="name flex">
<span>def <span class="ident">moveDistance</span></span>(<span>lDist, lSpeed=15, rDist=None, rSpeed=None, syncStop=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Drives each side of the robot by the distances and speeds specified.<br>
If only lDist is specified then both motors will drive that distance at 15cm/s<br>
If lDist and lSpeed are specified then both motors will drive that distance at that speed<br>
If syncStop is True then both motors will stop when one completes its operation
</p>
<p>Note that this is a blocking call and won't return until the operation has completed<br>
Note that operations that will take longer than 2 minutes will time out
</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>lDist</code></strong> :&ensp;<code>float</code></dt>
<dd>distance in cm for left motor
</dd>
<dt><strong><code>lSpeed</code></strong> :&ensp;<code>float</code></dt>
<dd>speed in cm/s for left motor (must be between -30 and 30)
</dd>
<dt><strong><code>rDist</code></strong> :&ensp;<code>float</code></dt>
<dd>distance in cm for right motor
</dd>
<dt><strong><code>lSpeed</code></strong> :&ensp;<code>float</code></dt>
<dd>speed in cm/s for left motor (must be between -30 and 30)
</dd>
<dt><strong><code>syncStop</code></strong> :&ensp;<code>boolean</code></dt>
<dd>whether or not to stop both motors as soon as one completes
</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>Exception on invalid arguments
</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def moveDistance(lDist, lSpeed=15, rDist=None, rSpeed=None, syncStop=False):
    &#34;&#34;&#34;
    Drives each side of the robot by the distances and speeds specified.
    If only lDist is specified then both motors will drive that distance at 15cm/s
    If lDist and lSpeed are specified then both motors will drive that distance at that speed
    If syncStop is True then both motors will stop when one completes its operation

    Note that this is a blocking call and won&#39;t return until the operation has completed
    Note that operations that will take longer than 2 minutes will time out

    Args:
      lDist (float): distance in cm for left motor
      lSpeed (float): speed in cm/s for left motor (must be between -30 and 30)
      rDist (float): distance in cm for right motor
      lSpeed (float): speed in cm/s for left motor (must be between -30 and 30)
      syncStop (boolean): whether or not to stop both motors as soon as one completes

    Raises:
      Exception on invalid arguments

    Returns:
      None
    &#34;&#34;&#34;
    motorValues = _buildMotorValuesArray(lDist, lSpeed, rDist, rSpeed, syncStop)
    # Give it two minutes max to complete the operation
    _rc.doMotorOperation(
        OPTYPE.MOTOR_SET, _buildMotorPacketData(motorValues), timeout=120
    )</code></pre>
</details>
</dd>
<dt id="micromelon.motors.setDegreesOffset"><code class="name flex">
<span>def <span class="ident">setDegreesOffset</span></span>(<span>offset)</span>
</code></dt>
<dd>
<div class="desc"><p>Applies offset as a difference to all degrees arguments in the Motor control functions.<br>
If it is big enough to change the sign of degrees it will not be applied.
</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>offset</code></strong> :&ensp;<code>float</code></dt>
<dd>Number of degrees offset to apply to all motor functions that take degrees<br>
as an argument
</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>Exception if offset is not a number
</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setDegreesOffset(offset):
    &#34;&#34;&#34;
    Applies offset as a difference to all degrees arguments in the Motor control functions.
    If it is big enough to change the sign of degrees it will not be applied.

    Args:
      offset (float): Number of degrees offset to apply to all motor functions that take degrees
                      as an argument

    Raises:
      Exception if offset is not a number

    Returns:
      None
    &#34;&#34;&#34;
    if not isNumber(offset):
        raise Exception(&#34;Degrees offset must be a number&#34;)
    global _degreesCalibrationOffset
    _degreesCalibrationOffset = offset</code></pre>
</details>
</dd>
<dt id="micromelon.motors.turn"><code class="name flex">
<span>def <span class="ident">turn</span></span>(<span>speed, secs=None, radius=0, reverse=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Makes the robot turn at the specified speed for the specified number of seconds.<br>
If seconds is a number &gt; 0 the function will block (wait) until that time has elapsed and stop the motors<br>
If seconds is None then the speeds will be set and the function will return<br>
Negative speed is a left turn. Speeds are cm/s must be between -30 and 30.<br>
By default it turns on the spot, but a radius in cm can be specified.
</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>speed</code></strong> :&ensp;<code>float</code></dt>
<dd>Motor speed to base the turn off.
If turning on the spot this will be actual speed.<br>
Will be scaled if radius &gt; 0. Must be between -30 and 30 (cm/s)
</dd>
<dt><strong><code>secs</code></strong> :&ensp;<code>float</code></dt>
<dd>Optional number of seconds to leave the motors running at the desired speed before stopping
</dd>
<dt><strong><code>radius</code></strong> :&ensp;<code>float</code></dt>
<dd>Optional radius (in cm) to make the turn in
</dd>
<dt><strong><code>reverse</code></strong> :&ensp;<code>boolean</code></dt>
<dd>If True then the turn will be done in reverse
</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>Exception on invalid arguments
</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def turn(speed, secs=None, radius=0, reverse=False):
    &#34;&#34;&#34;
    Makes the robot turn at the specified speed for the specified number of seconds.
    If seconds is a number &gt; 0 the function will block (wait) until that time has elapsed and stop the motors
    If seconds is None then the speeds will be set and the function will return
    Negative speed is a left turn. Speeds are cm/s must be between -30 and 30.
    By default it turns on the spot, but a radius in cm can be specified.

    Args:
      speed (float): Motor speed to base the turn off.  If turning on the spot this will be actual speed.
                    Will be scaled if radius &gt; 0. Must be between -30 and 30 (cm/s)
      secs (float): Optional number of seconds to leave the motors running at the desired speed before stopping
      radius (float): Optional radius (in cm) to make the turn in
      reverse (boolean): If True then the turn will be done in reverse

    Raises:
      Exception on invalid arguments

    Returns:
      None
    &#34;&#34;&#34;
    speed = restrictSpeed(speed)
    radius = restrictRadius(radius)

    params = _calcMotorSpeedsAndTime(speed, radius, None, reverse)
    speeds = params[&#34;speeds&#34;]

    if secs != None:
        secs = restrictTime(secs)
    else:
        secs = 0
    write(speeds[0], speeds[1], secs)</code></pre>
</details>
</dd>
<dt id="micromelon.motors.turnDegrees"><code class="name flex">
<span>def <span class="ident">turnDegrees</span></span>(<span>degrees, speed=15, radius=0, reverse=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Makes the robot turn at the specified number of degrees.<br>
Function will block (wait) until the operation has completed<br>
Negative speed is a left turn. Speeds are cm/s must be between -30 and 30.<br>
By default it turns on the spot, but a radius in cm can be specified.
</p>
<p>Note that operations that will take longer than 2 minutes will time out
</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>degrees</code></strong> :&ensp;<code>float</code></dt>
<dd>Number of degrees to turn.
Negative degrees is a left turn
</dd>
<dt><strong><code>speed</code></strong> :&ensp;<code>float</code></dt>
<dd>Motor speed to base the turn off.
If turning on the spot this will be actual speed.<br>
Will be scaled if radius &gt; 0. Must be between -30 and 30 (cm/s)
</dd>
<dt><strong><code>radius</code></strong> :&ensp;<code>float</code></dt>
<dd>Optional radius (in cm) to make the turn in
</dd>
<dt><strong><code>reverse</code></strong> :&ensp;<code>boolean</code></dt>
<dd>If True then the turn will be done in reverse
</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>Exception on invalid arguments
</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def turnDegrees(degrees, speed=15, radius=0, reverse=False):
    &#34;&#34;&#34;
    Makes the robot turn at the specified number of degrees.
    Function will block (wait) until the operation has completed
    Negative speed is a left turn. Speeds are cm/s must be between -30 and 30.
    By default it turns on the spot, but a radius in cm can be specified.

    Note that operations that will take longer than 2 minutes will time out

    Args:
      degrees (float): Number of degrees to turn.  Negative degrees is a left turn
      speed (float): Motor speed to base the turn off.  If turning on the spot this will be actual speed.
                    Will be scaled if radius &gt; 0. Must be between -30 and 30 (cm/s)
      radius (float): Optional radius (in cm) to make the turn in
      reverse (boolean): If True then the turn will be done in reverse

    Raises:
      Exception on invalid arguments

    Returns:
      None
    &#34;&#34;&#34;
    speed = restrictSpeed(speed)
    radius = restrictRadius(radius)
    if not isNumber(degrees):
        raise Exception(&#34;Degrees must be a number&#34;)

    if degrees == 0:
        return True

    params = _calcMotorSpeedsAndTime(speed, radius, degrees, reverse)

    motorValues = _buildMotorValuesArray(
        params[&#34;distances&#34;][0],
        params[&#34;speeds&#34;][0],
        params[&#34;distances&#34;][1],
        params[&#34;speeds&#34;][1],
        True,
    )

    if _rc.connectedRobotIsSimulated():
        motorValues.append(abs(degrees))
        # Give it two minutes max to complete the operation
        _rc.doMotorOperation(
            OPTYPE.TURN_DEGREES, _buildMotorPacketData(motorValues), timeout=120
        )
        return

    # Fall back to move distance for non-simulated robots
    return moveDistance(
        params[&#34;distances&#34;][0],
        params[&#34;speeds&#34;][0],
        params[&#34;distances&#34;][1],
        params[&#34;speeds&#34;][1],
        True,
    )

    # Both the below approaches should work:
    #   Time control prevents error accumulation in the encoders but relies on good latency
    # return moveDistance(params[&#39;distances&#39;][0], params[&#39;speeds&#39;][0],
    #     params[&#39;distances&#39;][1], params[&#39;speeds&#39;][1], True)
    # return write(params[&#39;speeds&#39;][0], params[&#39;speeds&#39;][1], params[&#39;seconds&#39;])</code></pre>
</details>
</dd>
<dt id="micromelon.motors.write"><code class="name flex">
<span>def <span class="ident">write</span></span>(<span>left, right=None, secs=0)</span>
</code></dt>
<dd>
<div class="desc"><p>Set the speed of the robot motors in cm/s<br>
If only one argument is given then both motors will be set to the same speed<br>
If secs is given then the set the motor speeds and block (wait) for that many seconds<br>
and then stop the motors
</p>
<h2 id="args">Args</h2>
<dl>
<dt>left, right (float): motor speeds must be between -30 and 30 (cm/s)</dt>
<dt><strong><code>secs</code></strong> :&ensp;<code>float</code></dt>
<dd>Optional number of seconds to wait for after setting the speeds then stop
</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>Exception on invalid arguments
</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write(left, right=None, secs=0):
    &#34;&#34;&#34;
    Set the speed of the robot motors in cm/s
    If only one argument is given then both motors will be set to the same speed
    If secs is given then the set the motor speeds and block (wait) for that many seconds
    and then stop the motors

    Args:
      left, right (float): motor speeds must be between -30 and 30 (cm/s)
      secs (float): Optional number of seconds to wait for after setting the speeds then stop

    Raises:
      Exception on invalid arguments

    Returns:
      None
    &#34;&#34;&#34;
    if right == None:
        right = left
    left = restrictSpeed(left)
    right = restrictSpeed(right)
    secs = restrictTime(secs)

    _rc.writeAttribute(OPTYPE.MOTOR_SET, _buildMotorPacketData([left, right]))
    if secs != 0:
        time.sleep(secs)
        _rc.writeAttribute(OPTYPE.MOTOR_SET, _buildMotorPacketData([0, 0]))</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<img src="../mm-logo.png" alt="Micromelon Logo">
</header>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="micromelon" href="../index.html">micromelon</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="micromelon.motors.moveDistance" href="#micromelon.motors.moveDistance">moveDistance</a></code></li>
<li><code><a title="micromelon.motors.setDegreesOffset" href="#micromelon.motors.setDegreesOffset">setDegreesOffset</a></code></li>
<li><code><a title="micromelon.motors.turn" href="#micromelon.motors.turn">turn</a></code></li>
<li><code><a title="micromelon.motors.turnDegrees" href="#micromelon.motors.turnDegrees">turnDegrees</a></code></li>
<li><code><a title="micromelon.motors.write" href="#micromelon.motors.write">write</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>